{% extends 'rumors/base.html' %}

{% block title %}{{ rumour.title }} - Rumor Tracking{% endblock %}

{% block content %}
<h1>üîç ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡∏∑‡∏≠</h1>

<div class="card">
    <h2>{{ rumour.title }}</h2>
    <p><strong>‡∏£‡∏´‡∏±‡∏™:</strong> {{ rumour.rumour_id }}</p>
    <p><strong>‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤:</strong> {{ rumour.source }}</p>
    <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á:</strong> {{ rumour.created_date }}</p>
    <p><strong>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠:</strong> {{ rumour.credibility_score }}</p>
    <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> <span class="status status-{{ rumour.status }}">{{ rumour.get_status_display }}</span></p>
    <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô:</strong> {{ rumour.report_count }} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
</div>

<!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô -->
<div class="card">
    <h3>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>
    {% if reports %}
    <table>
        <thead>
            <tr>
                <th>‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</th>
                <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            </tr>
        </thead>
        <tbody>
            {% for report in reports %}
            <tr>
                <td>{{ report.reporter.name }}</td>
                <td>{{ report.get_report_type_display }}</td>
                <td>{{ report.report_date }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
    {% endif %}
</div>

<!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô -->
{% if not rumour.is_verified %}
<div class="card">
    <h3>üìù ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ç‡πà‡∏≤‡∏ß‡∏ô‡∏µ‡πâ</h3>
    <form method="POST" action="{% url 'rumors:add_report' rumour.rumour_id %}">
        {% csrf_token %}
        <div class="form-group">
            <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô:</label>
            <select name="user_id" required>
                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ --</option>
                {% for user in users %}
                <option value="{{ user.user_id }}">{{ user.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô:</label>
            <select name="report_type" required>
                <option value="distorted">‡∏ö‡∏¥‡∏î‡πÄ‡∏ö‡∏∑‡∏≠‡∏ô</option>
                <option value="inciting">‡∏õ‡∏•‡∏∏‡∏Å‡∏õ‡∏±‡πà‡∏ô</option>
                <option value="false">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡πá‡∏à</option>
            </select>
        </div>
        <button type="submit" class="btn btn-danger">‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
    </form>
</div>
{% else %}
<div class="card">
    <p style="color: #27ae60;">‚úÖ ‡∏Ç‡πà‡∏≤‡∏ß‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ</p>
</div>
{% endif %}

<a href="{% url 'rumors:rumour_list' %}" class="btn btn-primary">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</a>
{% endblock %}
